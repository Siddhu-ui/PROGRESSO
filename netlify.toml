# Netlify configuration for PROGRESSO (Vite + React SPA)
# Docs: https://docs.netlify.com/configure-builds/file-based-configuration/
[build]
  command = "npm run build"
  publish = "dist"

# Optional: Increase build timeout (seconds) for heavier installs
# [build.processing]
#   skip_processing = false

# Dev settings used by Netlify CLI (`netlify dev`) to proxy and emulate.
[dev]
  command = "npm run dev"
  port = 5173
  publish = "dist"

# Environment variables (add real values in Netlify UI for security).
# For Vite, ONLY variables prefixed with VITE_ are exposed to the client.
# Add these in the Netlify UI (Site Settings -> Environment) rather than here
# unless you are comfortable committing them.
# [build.environment]
#   VITE_SUPABASE_URL = "https://xyz.supabase.co"
#   VITE_SUPABASE_ANON_KEY = "public-anon-key"
#   VITE_FIREBASE_API_KEY = "your-firebase-api-key"
#   VITE_FIREBASE_AUTH_DOMAIN = "your-firebase-auth-domain"
#   VITE_FIREBASE_PROJECT_ID = "your-firebase-project-id"
#   VITE_FIREBASE_STORAGE_BUCKET = "your-firebase-storage-bucket"
#   VITE_FIREBASE_MESSAGING_SENDER_ID = "sender-id"
#   VITE_FIREBASE_APP_ID = "app-id"
#   VITE_FIREBASE_MEASUREMENT_ID = "measurement-id"

# SPA fallback handled below; all routes serve index.html for client routing.
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# (Optional) Security headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "SAMEORIGIN"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "geolocation=(), microphone=(), camera=()"

# (Optional) Cache policy for static assets
[[headers]]
  for = "/assets/*"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
